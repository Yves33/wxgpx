<p><div class="toc">
<ul>
<li><a href="#1-general-considerations">1. GENERAL CONSIDERATIONS  </a><ul>
<li><a href="#11-what-does-wxgpgpsport-stands-for">1.1 What does wxGPGPSport stands for?</a></li>
<li><a href="#12-what-programming-language-does-it-use">1.2 What programming language does it use? </a></li>
<li><a href="#13-what-is-your-favorite-color">1.3 What is your favorite color?</a></li>
<li><a href="#14-why-did-you-write-it">1.4 Why did you write it?</a></li>
<li><a href="#15-what-licence-is-it-released">1.5 What licence is it released?</a></li>
</ul>
</li>
<li><a href="#2-installation">2. INSTALLATION</a><ul>
<li><a href="#21-how-do-i-install-it-the-easy-way">2.1 How do I install it, The easy way.</a></li>
<li><a href="#22-how-do-i-install-it-i-already-have-a-python-2x-environment-win-and-linux-and-maybe-macosx">2.2 How do I install it, I already have a python 2.x environment (win and linux, and maybe MacOSX)?</a></li>
<li><a href="#23-how-do-i-install-it-im-on-windows-and-i-do-not-have-a-working-python-27-install">2.3 How do I Install it, I&#x2019;m on windows and I do not have a working python 2.7 install?</a></li>
<li><a href="#24-how-do-i-install-it-im-on-macosx-intel-based-and-i-do-not-have-a-working-python-27-install">2.4 How do I install it, I&#x2019;m on MacOSX (intel based) and I do not have a working python 2.7 install?</a></li>
<li><a href="#25-how-do-i-install-it-im-on-linux-and-i-dont-have-a-working-python-27-install">2.5 How do I install it, I&#x2019;m on linux and I don&#x2019;t have a working python 2.7 install?</a></li>
<li><a href="#26-how-do-i-run-it">2.6 How do I run it?</a></li>
</ul>
</li>
<li><a href="#3-brief-manual">3. BRIEF MANUAL</a><ul>
<li><a href="#31-getting-started">3.1 Getting started:</a></li>
<li><a href="#32-opening-a-file">3.2 Opening a file: </a></li>
<li><a href="#33-using-the-map-panel">3.3 Using the map panel:</a></li>
<li><a href="#34-using-the-time-panel">3.4 Using the time panel:</a></li>
<li><a href="#35-selecting-datas-in-time-panel">3.5 Selecting datas in time panel:</a></li>
<li><a href="#36-saving-files">3.6 Saving files:</a></li>
<li><a href="#37-changing-units">3.7 Changing units:</a></li>
<li><a href="#38-using-replay">3.8 Using replay:</a></li>
</ul>
</li>
<li><a href="#4-plugins-and-scripts">4. PLUGINS AND SCRIPTS</a><ul>
<li><a href="#41-gauge-and-meter-plugin">4.1 Gauge and Meter plugin:</a></li>
<li><a href="#42-statistics-plugin">4.2 Statistics plugin:</a></li>
<li><a href="#43-scatterplot-plugin">4.3 ScatterPlot plugin:</a></li>
<li><a href="#44-polar-plugin">4.4 Polar plugin: </a></li>
<li><a href="#45-histogram-plugin">4.5 Histogram plugin:</a></li>
<li><a href="#46-measurement-plugin">4.6 Measurement plugin:</a></li>
<li><a href="#47-table-plugin">4.7 Table plugin:</a></li>
<li><a href="#48-waypoints-plugin">4.8 Waypoints plugin:</a></li>
<li><a href="#49-shell-plugin">4.9 Shell plugin:</a></li>
<li><a href="#410-internals">4.10 Internals:</a></li>
<li><a href="#411-exemple-scripts">4.11 Exemple scripts:</a></li>
</ul>
</li>
<li><a href="#5-about-this-document"> 5. ABOUT THIS DOCUMENT</a></li>
<li><a href="#6-todo-list"> 6. TODO LIST</a><ul>
<li><a href="#61-main-program">6.1 Main program</a></li>
<li><a href="#62-scripts">6.2 Scripts</a></li>
<li><a href="#63-plugins">6.3 Plugins</a></li>
</ul>
</li>
</ul>
</div>
</p>



<h1 id="1-general-considerations">1. GENERAL CONSIDERATIONS  </h1>



<h2 id="11-what-does-wxgpgpsport-stands-for">1.1 What does wxGPGPSport stands for?</h2>

<p>wxGPGPSport stands for wx General Purpose GPS Sport.  </p>



<h2 id="12-what-programming-language-does-it-use">1.2 What programming language does it use? </h2>

<p>wxGPGPSport is written in python 2.7, but it should be compatible with any 2.x version. <br>
wxGPGPSport is not compatible with python 3.x  </p>



<h2 id="13-what-is-your-favorite-color">1.3 What is your favorite color?</h2>

<p>Blue, no yellow! Arghhhh!</p>



<h2 id="14-why-did-you-write-it">1.4 Why did you write it?</h2>

<p>I bought a canmore GP102+ GPS (cheap) for windsurf and other outdoor activities. As I was not satisfied by the software provided (windows only, not flexible enough), nore by other software available on the net, I decided to see what I could code on my own. <br>
Originally, wxGPGPSport is an exercise to learn python+numpy+matplotlib. The project then slowly evolved towards a more integrated GPS app. Although it does not claim to be as powerful as X or Y, It is very flexible, and I had a lot of fun while developing this app.  </p>



<h2 id="15-what-licence-is-it-released">1.5 What licence is it released?</h2>

<p>wxGPGPSport is open source. I haven&#x2019;t decided a license yet. Let&#x2019;s say it&#x2019;s GPL.  </p>



<h1 id="2-installation">2. INSTALLATION</h1>



<h2 id="21-how-do-i-install-it-the-easy-way">2.1 How do I install it, The easy way.</h2>

<p>Since version 20170630, the wxgpx is compatible with pyinstaller. You can therefore directly download a binary release (at least for windows) from the project home page (<a href="http://develandco.blog.free.fr">http://develandco.blog.free.fr</a>) (github doesn&#x2019;t support files larger than 25MB). <br>
The binary version is named wxgpx-latest-xx.zip where xx is either win32 or osx <br>
On windows, just download , unzip, and doubleclick on wxgpgpsport.exe  <br>
On macOSX, just download, unzip and doubleclick wxgpgpsport. <br>
On linux, No binaries are available.</p>



<h2 id="22-how-do-i-install-it-i-already-have-a-python-2x-environment-win-and-linux-and-maybe-macosx">2.2 How do I install it, I already have a python 2.x environment (win and linux, and maybe MacOSX)?</h2>

<p>If you already have a python environment installed, then you should install the following modules: <br>
* python-dateutil <br>
* numpy <br>
* matplotlib <br>
* lxml <br>
* wxPython <br>
* PyOpenGL WITH glut support (for font display). Although opengl is not mandatory, displaying traces is much faster with OpenGL</p>

<p>On windows platform, all required modules (see next paragraph) can be downloaded from the following url: <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a> Be sure to get the appropriate python version (cp27) and the correct architecture for your system. <br>
You can install them using: <br>
<code>pip install path/to/your/downloaded/package.whl</code> <br>
Alternatively, most of them can just be installed using: <br>
<code>pip install mypackage</code> <br>
However, on my python installation, <br>
<code>pip install lxml</code> will fail (pip install lxml==3.6.0 is ok) <br>
<code>pip install PyOpenGL PyOpenGL-accelerate</code> will not install GLUT properly.  </p>

<p>On linux platform, all required packages can be installed using you package manager (synaptic for debian, yumex or dnf for fedora)  </p>

<p>On OSX platform, it may be tricky to have all requirements to work&#x2026; see corresponding section of this file. <br>
Once all required packages have been installed, extract wxGPGPSport archive. <br>
Note that the software should work even without OpenGL. However, all drawings on map will be slower.  </p>



<h2 id="23-how-do-i-install-it-im-on-windows-and-i-do-not-have-a-working-python-27-install">2.3 How do I Install it, I&#x2019;m on windows and I do not have a working python 2.7 install?</h2>

<ul>
<li><p>Download and install Python2.7 (64 bits or 32 bits depending on your system. I use 32 bits although my system is win64). Be sure to select the option &#x201c;Add python.exe to Path&#x201d; Python 3.x will not work! <br>
(64 bits) <a href="https://www.python.org/ftp/python/2.7.12/python-2.7.12.amd64.msi">https://www.python.org/ftp/python/2.7.12/python-2.7.12.amd64.msi</a> <br>
(32 bit) <a href="https://www.python.org/ftp/python/2.7.12/python-2.7.12.msi">https://www.python.org/ftp/python/2.7.12/python-2.7.12.msi</a></p></li>
<li><p>If you didn&#x2019;t select &#x201c;Add python.exe to Path&#x201d; in installer, adjust system environment variables (right click on computer, advanced settings -> Environment Variables) and modify the system variable PATH (if you installed python in C:\Python27):&#x2028;PATH=C:\Python27\;C:\Python27\Scripts;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem</p></li>
<li><p>Open a command window (Accessories->Command Prompt) and type: <br>
<code>python -m pip install --upgrade pip</code></p></li>
<li><p>Go to <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a> and download the following packages (Choose appropriate win32.whl or win_amd64.whl when available depending on your python version - Be carefull to download python 2.7 versions)  </p>

<ul><li>setuptools-28.6.0-py2.py3-none-any.whl</li>
<li>pyparsing-2.1.10-py2.py3-none-any.whl</li>
<li>pytz-2016.7-py2.py3-none-any.whl</li>
<li>six-1.10.0-py2.py3-none-any.whl</li>
<li>setuptools-28.6.0-py2.py3-none-any.whl</li>
<li>cycler-0.10.0-py2.py3-none-any.whl</li>
<li>python_dateutil-2.6.0-py2.py3-none-any.whl</li>
<li>numpy-1.11.2+mkl-cp27-cp27m-win32.whl</li>
<li>matplotlib-1.5.3-cp27-cp27m-win32.whl</li>
<li>lxml-3.6.4-cp27-cp27m-win32.whl</li>
<li>PyOpenGL-3.1.1-cp27-cp27m-win32.whl</li>
<li>PyOpenGL_accelerate-3.1.1-cp27-cp27m-win32.whl</li>
<li>wxPython_common-3.0.2.0-py2-none-any.whl</li>
<li>wxPython-3.0.2.0-cp27-none-win32.whl</li></ul>

<p>(for 64 bits python version, replace win32.whl with win_amd64.whl)</p></li>
<li><p>Install the downloaded packages (in that order) using the command window (Accessories->Command Prompt) <br>
<code>pip install path/to/your/downloaded/package.whl</code></p></li>
<li><p>You&#x2019;re done. Your python environment should be about 250MB. Installation through conda/miniconda is also possible (see OSX section), but takes much more space on disk. Be careful that, if you use conda, you&#x2019;ll still have to download PyOpenGL packages, as the one provided by pip do not include glut/freeglut.  </p></li>
<li><p>If you downloaded the entire git repo, there will file named install_requirements.bat that will install all required packages. However, the script may fail to set the correct PATH, in which case you should refer to the beginning of this paragraph.</p></li>
</ul>



<h2 id="24-how-do-i-install-it-im-on-macosx-intel-based-and-i-do-not-have-a-working-python-27-install">2.4 How do I install it, I&#x2019;m on MacOSX (intel based) and I do not have a working python 2.7 install?</h2>

<p>Yes, you have! OSX comes with preinstalled python. you should just take care that you installed the required modules. However, getting all dependencies to work with the OSX preinstalled python version might be tricky. Hence, I recommend using miniconda2 for OSX.</p>

<ul>
<li><p>Download and install miniconda2 : <br>
<a href="https://repo.continuum.io/miniconda/Miniconda2-latest-MacOSX-x86_64.sh">https://repo.continuum.io/miniconda/Miniconda2-latest-MacOSX-x86_64.sh</a></p></li>
<li><p>Download and install wxPython for OSX : <br>
<a href="http://downloads.sourceforge.net/wxpython/wxPython3.0-osx-3.0.2.0-cocoa-py2.7.dmg">http://downloads.sourceforge.net/wxpython/wxPython3.0-osx-3.0.2.0-cocoa-py2.7.dmg</a></p></li>
<li><p>Open a terminal and type: <br>
<code>conda install dateutil</code> <br>
<code>conda install numpy</code> <br>
<code>conda install matplotlib</code> <br>
<code>conda install lxml</code> <br>
<code>conda install pip</code> <br>
<code>conda clean --all</code> <br>
<code>pip install PyOpenGL PyOpenGL_accelerate</code>  </p></li>
<li><p>If you do not want to install a new python environment, then the following should work (in a terminal - but I haven&#x2019;t tested this method I would be happy to get some feedback) <br>
<code>sudo easy_install pip</code> <br>
<code>pip install dateutil numpy matplotlib lxml</code> <br>
<code>pip install PyOpenGL PyOpenGL_accelerate</code>  </p></li>
<li><p>Once all required packages have been installed, extract wxGPGPSport archive. <br>
NB: I&#x2019;m not sure the program will work on PPC based macintosh. I would be happy to have some feedback</p></li>
</ul>



<h2 id="25-how-do-i-install-it-im-on-linux-and-i-dont-have-a-working-python-27-install">2.5 How do I install it, I&#x2019;m on linux and I don&#x2019;t have a working python 2.7 install?</h2>

<p>Yes, you have (I&#x2019;m not sure any recent distribution comes without python!) <br>
Please refer to you software manager (synaptic, yumex/dnf) to install appropriate python modules. <br>
Once all required packages have been installed, extract wxGPGPSport archive.</p>



<h2 id="26-how-do-i-run-it">2.6 How do I run it?</h2>

<p>On windows: doubleclick launch_WIN.bat, or on wxgpgpsport.py if you python files are already associated with python executables (right click on *.py file, then select open with and browse to miniconda/python.exe or miniconda\pythonw.exe). <br>
On macOSX: doubleclick launch_OSX.command, or enter pythonw .gpgpsport.py in a terminal window. <br>
On linux  : open a command prompt and run python gpgpsport.py, or double click glaunch_linux.sh after chmod +x ./gpgpsport.sh), or associate *.py files with correct program python. Depends on your file manager.</p>



<h1 id="3-brief-manual">3. BRIEF MANUAL</h1>



<h2 id="31-getting-started">3.1 Getting started:</h2>

<p>At startup, the software window is divided into 3 main panels: <br>
* The top left panel (map panel) shows a view of the earth. <br>
* The bottom panel (time panel) should be empty. <br>
* The top right panel (plugin notebook) displays a notebook where a variety of plugins can display additional data computed from current file. <br>
* The status bar will display information about the current point. <br>
* In all program, the mouse wheel is emulated with Ctrl+left click and Ctrl+right click. I found it very convenient on a laptop without mouse wheel.</p>



<h2 id="32-opening-a-file">3.2 Opening a file: </h2>

<ul>
<li>Using the menu (File->Open), you&#x2019;ll get a file selection dialog box where you can browse to the file you want to open.</li>
<li>The program can read gpx files v1.0 (*.gpx), compressed gpx files (*.gpz, gpx.gz) and Garmin fit files (*.fit). Be sure to select the right type of file in the file selector filter combo box.</li>
<li>If no information is found concerning speed in the file, the speed is calculated according to GPS positions and time. Some other information (such as slope, course,&#x2026;) are calculated by the software and everything is stored in a table (to learn more about this table, see plugins section, table and shell).</li>
</ul>



<h2 id="33-using-the-map-panel">3.3 Using the map panel:</h2>

<ul>
<li>The map panel displays the trace using false colors (red=very fast, blue=very slow). The background is dynamically fetched from various tile servers.</li>
<li>A palette of tools is displayed in the upper left corner. The active tool determines which layer will handle mouse clicks and keyboard events. The default tool is the pan-zoom tool, which enables to translate and zoom the map.</li>
<li>You can zoom in and out using the mouse wheel.</li>
<li>You can translate using the mouse (left click+drag)</li>
<li>You can right click on the map and choose an alternate map tile provider (some of them may not be working). The default provider is open street maps. It is possible to load tiles from google satellite, but you have to know that accessing these tiles outside the dedicated google api is illegal!</li>
<li>You can use F10, F11 and F5 to zoom in, zoom out and refresh the current view (that is force the software to re-download map images)</li>
<li>When you move the mouse, an indicator (green arrowhead by default) will indicate the current point (trace point closest to mouse pointer). The position of the cursor is updated in time panel (see below).</li>
<li>You can customize the information displayed on map by double clicking on the map. A dialog will appear with several options: <br>
** key for color code: the value that will be used to calculate false colors for track representation. False colors vary from blue (for minimum) to red (for maximum). If you do not want false colors, then select none in the drop down combo box. At the present time, the palette cannot be modified without using custom scripts (see the script &#x2018;palette&#x2019;) <br>
** line width: the width of line used to display gps track and current indicator. Default is 2. <br>
** custom color: the color used to draw track if &#x2018;use custom color&#x2019; is selected as the key for false colors. <br>
** indicator style: you can choose between dot, arrowhead, vector from and vector to current point. If you choose arrowhead or vector, you&#x2019;ll need to specify a key for the direction (arrowhead/vector) and a key for vector length (vector only). <br>
** custom color: the color to use to draw indicator. <br>
** key for angle and key for magnitude: the values used to determine arrowhead/vector orientation and vector magnitude. <br>
** zoom factor: used to adjust vector length on map. <br>
** draw label check box: whether to draw or not a label nearby to current point. <br>
** key fro label: the value to be used for label. <br>
** label position: an x,y couple indicating the relative position of the label.  </li>
</ul>



<h2 id="34-using-the-time-panel">3.4 Using the time panel:</h2>

<ul>
<li>The time panel displays a graph where speed (by default) is plotted against time (by default).  </li>
<li>The mouse wheel on X- and Y- axis enables you to zoom at some specific portion of the curve (it may be necessary to click on the panel in order to give focuss to this panel).  </li>
<li>Left click+drag on X-axis and drag to displace the area represented.  </li>
<li>Double click on graph to choose graph parameters. Most parameters should be pretty self-eplanatory. You can plot up to 3 overlapping graphs with same X-axis.  </li>
<li>When you move the mouse, the vertical cursor (red) moves to follow the mouse. On map panel, the current position (green arrowhead by default) will follow the position of the cursor.  </li>
</ul>



<h2 id="35-selecting-datas-in-time-panel">3.5 Selecting datas in time panel:</h2>

<ul>
<li>You can select a small range of data by using left click+drag in time panel curve. The selected area will appear grey.  </li>
<li>Using right click, you can enable/disable the selected points (or the non-selected points). Once a selection is disabled, all panels are updated (including plugins) and all calculations in plugins are restricted to selected datas.  </li>
<li>Use left click (without drag) to empty selection.  </li>
<li>To enable all points, simply enable all selected points (whatever the selection), then enable all non-selected points. Alternatively, select no point and use &#x201c;enable non-selected points&#x201d;.</li>
<li>Delete points is reserved for future use and should not be used. As wxGPGPSport does not save fit or gpx files, your files will not de damaged if you use this option. (*.npz files will lose the points that you deleted).</li>
</ul>



<h2 id="36-saving-files">3.6 Saving files:</h2>

<ul>
<li>wxGPGPSport saves the files as standard numpy arrays (*.npz). This files can then be opened in with the standard file->open menu. All columns in table are saved in the npz file.</li>
<li>wxGPGPSport can save the files as GPX (*.gpx) files, with the possibility to additional datas as extensions.</li>
</ul>



<h2 id="37-changing-units">3.7 Changing units:</h2>

<ul>
<li>By selecting GPX->Units menus, a popup dialog will appear where you can change units for the current file.</li>
<li>The program only works with International units (SI: meters, seconds, m/s,&#x2026;). All calculations are made using these units, and converted to appropriate units using a conversion factor immediately before being displayed. <br>
For instance, if you ask for km/h as units, datas will be multiplied by 3.6 (1m/s=3.6 km/h)</li>
<li>Unit consistency is not checked: you can use seconds (s) for the distance, and nautic miles (nq) for duration!</li>
<li>For each data in table, a combo box allows you to choose the unit you whish.</li>
</ul>



<h2 id="38-using-replay">3.8 Using replay:</h2>

<ul>
<li>If a selection is made in time panel, then you can replay the selected part of the trace using GPX->replay menu. The Replay speed is an arbitrary number representing the interval between two time points, in ms.</li>
<li>You can stop the replay by re-selecting the menu GPX->replay</li>
<li>During replay, the current position is not updated according to mouse position.</li>
</ul>



<h1 id="4-plugins-and-scripts">4. PLUGINS AND SCRIPTS</h1>

<p>The program uses a simple plugin architecture. There is currently no option in the program to select which plugins are loaded If you want to disable some plugins, just add an underscore to the name of the appropriate *.py file in plugins directory. <br>
Plugin tabs can be moved to reorder them, but they can also be docked on the side of the window so that several plugins can be displayed at the same time.</p>



<h2 id="41-gauge-and-meter-plugin">4.1 Gauge and Meter plugin:</h2>

<ul>
<li>The gauge and meter plugins displays a dynamic color gauge or speedmeter representing speed (or any other parameter)</li>
<li>Double click to select parameters</li>
<li>these two plugin provide a Screenshot(path) command (see 4.8 Shell plugin) that allows you to save their state as images (for later embedding in video software through universal subtitle file)</li>
</ul>



<h2 id="42-statistics-plugin">4.2 Statistics plugin:</h2>

<ul>
<li>The statistics plugin displays some information about the current file. It should be pretty self-explanatory</li>
<li>No user interaction is possible with this plugin (beside copying text)</li>
</ul>



<h2 id="43-scatterplot-plugin">4.3 ScatterPlot plugin:</h2>

<ul>
<li>The scatter plot plugin displays X-Y plots of any numeric value in table. The same controls as in time view are available:</li>
<li>mouse wheel in X- and Y- axis to zoom</li>
<li>left click+drag in axis to move the region of interest</li>
<li>double click to select plot parameters</li>
</ul>



<h2 id="44-polar-plugin">4.4 Polar plugin: </h2>

<ul>
<li>The polar plot plugin displays theta-radius plots of any numeric value in table. Usually, course is used for theta, but you may feel free to use any other value.</li>
<li>Mouse wheel in graph to zoom</li>
<li>Double click to select plot parameters</li>
</ul>



<h2 id="45-histogram-plugin">4.5 Histogram plugin:</h2>

<ul>
<li>The histogram plugin displays an histogram of a given measurement (default is speed).</li>
<li>Mouse wheel on graph to zoom</li>
<li>Left click+drag to move the region of interest</li>
<li>Double click to select histogram parameters, such as number of columns.</li>
</ul>



<h2 id="46-measurement-plugin">4.6 Measurement plugin:</h2>

<ul>
<li>The measurement plugin can be used to measure the width and height of the entire map panel.</li>
<li>When the Measure tool is selected on map (the pen and meter icon), you can use left click to add points to default path. The path is drawn on map and its length is automatically updated in the measure plugin panel. You can delete points from the path by right clicking on points (when measure tool is selected).</li>
</ul>



<h2 id="47-table-plugin">4.7 Table plugin:</h2>

<ul>
<li>The table plugin displays a table with all values that were imported from the current file and the values calculated (either automatically, or by user)</li>
<li>The OK column will allow you to select/deselect individual points (unselected points are excluded from calculations. This is the same as enabling-disabling datas using the time view</li>
<li>You can directly edit a value, and the corrected value will be updated in time panel, map panel and individual plugins</li>
<li>You can select individual cells, multiple cells with shift+click, entire columns or entire lines by clicking in column/line headers.</li>
<li>Clicking on selected column header will enable you to suppress columns, insert columns, and sort the entire table according to this column values (both ascending and descending sort can be made.</li>
<li>Clicking on row header will enable you to enable/disable the selected (or the non selected) data points.</li>
</ul>



<h2 id="48-waypoints-plugin">4.8 Waypoints plugin:</h2>

<ul>
<li>The waypoints plugin can be used to select only parts of the track based on specific waypoints, also called &#x201c;doors&#x201d; (like in a ski slalom). In order to use the waypoints plugin, you have to use the waypoints tool on the map (the flag icon).</li>
<li>You can draw directly the doors (waypoints) on the map by left clicking then dragging the mouse to define two points. A waypoint is passed each time the track crosses the segment defined by the waypoint.</li>
<li>You can remove waypoints by right clicking on the dots that materialize the waypoints.</li>
<li>Each time you add a waypoint, the list of waypoint is updated in that waypoints panel. You can copy it to later save this list. Pasting a list of waypoints in this panel (followed by enter) will update the doors portion on the map. <br>
When you click on analyse button, the software will ask you the list of waypoints to be crossed. Just enter a coma separated list of waypoints number in the order you want to cross them. The software will then extract the suitable track portions and display some information on these portions. If requested (default behavior), the software will disable any point outside the suitable track portion.</li>
</ul>



<h2 id="49-shell-plugin">4.9 Shell plugin:</h2>

<ul>
<li>The shell plugin is simply a python shell that gives you access to the internals of the program. Using the shell plugin, you can manipulate your gps track as you want.</li>
<li>The table holding all datas is a numpy ndarray that can be accessed through the gpx variable. <br>
All methods from the gpx objects are available, however, in most cases, you&#x2019;ll only use the following ones:</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append_column</span><span class="hljs-params">(self,key,typ)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">drop_column</span><span class="hljs-params">(self,key)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move_column</span><span class="hljs-params">(self, oldkey, newkey)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append_row</span><span class="hljs-params">(self, values)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">drop_row</span><span class="hljs-params">(self,rownum)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_last_row_idx</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_last_col_idx</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_headers</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_header_names</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_header_types</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">has_field</span><span class="hljs-params">(self,field)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_col_count</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_row_count</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_unit</span><span class="hljs-params">(self,key,value)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_unit</span><span class="hljs-params">(self,key)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_unit_sym</span><span class="hljs-params">(self,key)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_unit_desc</span><span class="hljs-params">(self,key)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_scale</span><span class="hljs-params">(self,key)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_scale</span><span class="hljs-params">(self, key, value)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hv_distance</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hv_course</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hv_speed</span><span class="hljs-params">(self,skipnan=True)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">slope</span><span class="hljs-params">(self,conv=<span class="hljs-number">10</span>,skipnan=False)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hv_nearest</span><span class="hljs-params">(self, lat, lon)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">duration</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hv_pace</span><span class="hljs-params">(self,dist,ahead=False)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sort_asc</span><span class="hljs-params">(self,key)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sort_desc</span><span class="hljs-params">(self,key)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_top_n</span><span class="hljs-params">(self,key,n)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ok</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">discard</span><span class="hljs-params">(self)</span>:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">nanmean</span><span class="hljs-params">(self,a)</span>:</span></code></pre>

<ul>
<li>you can easily access the individual table columns using the following syntax:</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">gpx[<span class="hljs-string">'key'</span>]      <span class="hljs-comment"># or, for a given cell gpx['key'][rowidx]</span>
gpx[<span class="hljs-string">'lat'</span>][<span class="hljs-number">0</span>]   <span class="hljs-comment"># gives the latitude of the first point in file</span>
gpx[<span class="hljs-string">'lat'</span>][<span class="hljs-number">10</span>]  <span class="hljs-comment"># gives the latitude of the 10th point in file</span>
gpx[<span class="hljs-string">'lat'</span>]      <span class="hljs-comment"># returns an array holding all latitudes</span></code></pre>

<ul>
<li>The data are returned in SI units (remember that wxGPGPSPort only works in SI units, then converts to user defined units).  There is a workaround to access scaled values, which is to index you array with a tupple (key, scaled):</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">gpx[(<span class="hljs-string">'speed'</span>,<span class="hljs-number">1</span>)] <span class="hljs-comment"># returns speed in user defined units</span>
gpx[(<span class="hljs-string">'speed'</span>,<span class="hljs-number">0</span>)] <span class="hljs-comment"># returns speed in SI units</span></code></pre>

<ul>
<li>You can also filter out disabled values using a 3 element tupple (key, scaled, enabled)</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment"># both formulations are equivalent</span>
<span class="hljs-comment"># return speed of all enabled points in user units</span>
gpx[(<span class="hljs-string">'speed'</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)]
gpx[<span class="hljs-string">'speed'</span>][np.where(gpx[<span class="hljs-string">'ok'</span>]==<span class="hljs-number">1</span>)]*gpx.get_scale(<span class="hljs-string">'speed'</span>)</code></pre>

<p><em>Sounds complicate!!</em> So here are a few exemples: <br>
- Calculate maximum seed in SI units:</p>



<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">print</span> <span class="hljs-string">"vmax: "</span>, gpx[<span class="hljs-string">'speed'</span>].max(),<span class="hljs-string">"m/s"</span></code></pre>

<ul>
<li>Calculate average speed in user units:</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">print</span> <span class="hljs-string">"average speed: "</span>,                \
gpx[<span class="hljs-string">'speed'</span>].mean()*gpx.get_scale(<span class="hljs-string">'speed'</span>), \
gpx.get_unit_sym(<span class="hljs-string">'speed'</span>)</code></pre>

<p>or, using tupple indexing:</p>



<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">print</span> <span class="hljs-string">"average speed: "</span>,gpx[(<span class="hljs-string">'speed'</span>,<span class="hljs-number">1</span>)].mean(),gpx.get_unit_sym(<span class="hljs-string">'speed'</span>)</code></pre>

<ul>
<li>Calculate the average speed for points above 3m/s:</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">indices = np.where(gpx[<span class="hljs-string">'speed'</span>]><span class="hljs-number">3</span>)
<span class="hljs-keyword">print</span> <span class="hljs-string">"average above 3m/s: "</span>, gpx[<span class="hljs-string">'speed'</span>][indices].mean()</code></pre>

<p>or, skipping the intermediate array:</p>



<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">print</span> <span class="hljs-string">"avg above 3m/s: "</span>, gpx[<span class="hljs-string">'speed'</span>][np.where(gpx[<span class="hljs-string">'speed'</span>]><span class="hljs-number">3</span>)].mean()</code></pre>

<ul>
<li>Calculate the average speed for points below 3kts using tuple indexing:</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">gpx.set_unit(<span class="hljs-string">'speed'</span>, <span class="hljs-string">'kts'</span>)
<span class="hljs-keyword">print</span> <span class="hljs-string">"avg below 3kts: "</span>,gpx[(<span class="hljs-string">'speed'</span>,<span class="hljs-number">1</span>)][np.where(gpx[(<span class="hljs-string">'speed'</span>,<span class="hljs-number">1</span>)]&amp;lt;<span class="hljs-number">3</span>)].mean()</code></pre>

<ul>
<li>Selecting only points where speed is above 10km/h:</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">gpx.set_unit(<span class="hljs-string">'speed'</span>, <span class="hljs-string">'km/h'</span>)
gpx[<span class="hljs-string">'ok'</span>][np.where(gpx[(<span class="hljs-string">'speed'</span>,<span class="hljs-number">1</span>)]&amp;lt;<span class="hljs-number">10</span>)]=<span class="hljs-keyword">False</span>
sh.upd()    <span class="hljs-comment"># send update signal to all panels and plugins</span></code></pre>

<ul>
<li>Creating and deleting new columns: <br>
You can create an extra column in the table and manipulate its values by providing a name and the type of data (floating point numbers, in most cases), then rename or delete the column.</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">gpx.append_column(<span class="hljs-string">'accel'</span>, <span class="hljs-string">'float'</span>)
gpx[<span class="hljs-string">'accel'</span>]=np.ediff1d(gpx[<span class="hljs-string">'speed'</span>],<span class="hljs-number">0</span>)/gpx[<span class="hljs-string">'deltat'</span>]
gpx.move_column(<span class="hljs-string">'accel'</span>, <span class="hljs-string">'acceleration'</span>)
gpx.drop_column(<span class="hljs-string">'acceleration'</span>)</code></pre>

<ul>
<li><p>You can write all your instructions in a script then run the script using &#x201c;run script&#x2026;&#x201d; button in shell plugin.</p></li>
<li><p>Any file in the scripts folder named Startup.py will be executed immediately after program starts.</p></li>
<li><p>the script module gives you access to the following objects/commands:</p></li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">gpx         <span class="hljs-comment"># the array holding all values, with associated methods.</span>
mapview     <span class="hljs-comment"># the map object. All methods from WxMapWidget are available|</span>
timeview    <span class="hljs-comment"># the time object. All methods from WxTimeWidget are available</span>
app         <span class="hljs-comment"># the application itself. All methods from wx.Panel are available, but you&#x2019;ll mainly use app.OpenFile(filename) and app.SaveFile(filename)</span>
sh          <span class="hljs-comment"># the shell by itself. Usefull commands may include sh.clear() to clear the shell, sh.run(filename) to run an external python file, sh.copy(text) to put text in the clipboard, and sh.upd() to force an update of map, time and plugin panels</span>
WxQuery     <span class="hljs-comment"># access to simple gui    (see the moule WxQuery in modules folder)</span></code></pre>

<p>For instance, to clear the cache of downloaded tiles, you may enter:</p>



<pre class="prettyprint"><code class="language-python hljs ">mapview.TruncCache(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)</code></pre>



<h2 id="410-internals">4.10 Internals:</h2>

<p>The internal columns used for calculation in table are listed below: do not modify these columns!! Columns starting with underscore are reserved for program and should not be used in your scripts (or read only). Columns starting with underscore are ignored when file is saved in npz format (and I advice not to export them in gpx files)</p>



<pre class="prettyprint"><code class="language-python hljs ">ok          <span class="hljs-comment"># is point marked as valid or not?</span>
time        <span class="hljs-comment"># time of recording. if absent from gpx file, will be automatically generated</span>
lat         <span class="hljs-comment"># latitude</span>
lon         <span class="hljs-comment"># longitude</span>
distance    <span class="hljs-comment"># cumulative distance since beginning of recording</span>
idx         <span class="hljs-comment"># the index of point in file. Usefull for scripting</span>
deltat      <span class="hljs-comment"># interval (s) between two consecutive points</span>
deltaxy     <span class="hljs-comment"># distance (m) between two consecutive points</span>
duration    <span class="hljs-comment"># cumulative time(s) since beginning of recordings</span></code></pre>

<p>The following columns may be either read (when available) or calculated from gps:</p>



<pre class="prettyprint"><code class="language-python hljs ">speed       <span class="hljs-comment"># the instantaneous speed. Doppler (if available) or computed from gps data</span>
course      <span class="hljs-comment"># the course of the ship, in degrees</span></code></pre>

<p>Other columns imported from gps/fit file may include:</p>



<pre class="prettyprint"><code class="language-python hljs ">ele             <span class="hljs-comment"># elevation data</span>
magvar          <span class="hljs-comment"># magnetic orientation of gps</span>
hr/heartrate    <span class="hljs-comment"># heart rate</span>
cadence         <span class="hljs-comment"># cadence</span>
power           <span class="hljs-comment"># power</span>
temp            <span class="hljs-comment"># temperature</span>
distance        <span class="hljs-comment"># distance may be overridden by internal distance calculation</span></code></pre>

<p>if elevation (&#x2018;ele&#x2019;) data is found, the soft will calculate &#x2018;slope&#x2019; value (inaccurate) <br>
Some other variables are created by some scripts, such as:</p>



<pre class="prettyprint"><code class="language-python hljs ">wind_dir            <span class="hljs-comment"># wind direction, in degrees (North=0)</span>
wind_avg            <span class="hljs-comment"># average wind speed</span>
wind_mini           <span class="hljs-comment"># minimal wind speed</span>
wind_maxi           <span class="hljs-comment"># maximal wind speed</span>
app_wind_avg        <span class="hljs-comment"># apparent wind speed</span>
app_wind_dir        <span class="hljs-comment"># apparent wind direction (buggy)</span>
tack                <span class="hljs-comment"># port and starboard tack (one is 1.0, the other -1.0)</span></code></pre>



<h2 id="411-exemple-scripts">4.11 Exemple scripts:</h2>

<p>I&#x2019;ve tried to provide some scripts examples. Some are heavily commented, some other are not!</p>

<ul>
<li><p>Average_above_speed <br>
A very simple script showing how to use wxQuery to display a simple Graphical user interface and output some results to shell window.</p></li>
<li><p>Windsurf_statistics <br>
A More complex example that display complete statistics about windsurf session. Informations are output to the shell window. A summary of main values is copied in the clipboard so you can paste it in an excel spreadsheet.</p></li>
<li><p>Time_shift <br>
A very simple script showing how to use wxQuery to alter the time of gpx points in current file.</p></li>
<li><p>Winds_up_import <br>
This script is able to import the wind speed and direction from a &#x201c;saved&#x201d; html file. To use it, you must first go to winds-up site, then reach the statistics page for the date and spot where your gps file was recorded (for instance <a href="http://www.winds-up.com/spot-hourtin-lac-windsurf-kitesurf-25-observations-releves-vent.html?date=2017-01-13">http://www.winds-up.com/spot-hourtin-lac-windsurf-kitesurf-25-observations-releves-vent.html?date=2017-01-13</a> ). <br>
The script will automatically parse the file and generate four columns in current file:  </p></li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">wind_avg     <span class="hljs-comment"># average wind speed  </span>
wind_mini    <span class="hljs-comment"># minimal wind speed  </span>
wind_maxi    <span class="hljs-comment"># maximal wind speed  </span>
wind_dir     <span class="hljs-comment"># wind direction, in degrees, that is the direction the wind is pointing to north=0. South winds points towards the North</span></code></pre>

<ul>
<li>Wind <br>
A very simple plugin to enter the values of speed when you can&#x2019;t or don&#x2019;t want to download from winds-up.  <br>
The script will generate four columns in table, as  Winds-up_import.py</li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">wind_avg      <span class="hljs-comment"># average wind speed  </span>
wind_mini     <span class="hljs-comment"># minimal wind speed  </span>
wind_maxi     <span class="hljs-comment"># maximal wind speed  </span>
wind_dir      <span class="hljs-comment"># wind direction, in degrees, that is the direction the wind is pointing to (north=0. South winds points towards the North)</span></code></pre>

<ul>
<li><p>Palette <br>
The palette script is a proof of concept. It shows you how to monkey patch (<a href="https://en.wikipedia.org/wiki/Monkey_patch">https://en.wikipedia.org/wiki/Monkey_patch</a>) the software to use matplotlib palettes to display the gps track.</p></li>
<li><p>Batch_process_template <br>
As indicated, it is a template showing how to batch process files. You&#x2019;ll have to modify it so that it fits your needs.</p></li>
<li><p>Apparent_wind_VMG <br>
Very buggy for now&#x2026; The script calculates apprent wind (but not VMG for now). There is a bug which causes the apparent wind to be oriented 180&#x00b0; during the jibe.</p></li>
<li><p>Jibe_analysis <br>
Still unstable. performs some basic statistics about jibe. You need to geive wind direction in degrees and the number of points for smoothing (convolution). <br>
two columns are created:</p></li>
</ul>



<pre class="prettyprint"><code class="language-python hljs ">tack          <span class="hljs-comment"># the current tack, ranging from -1.0 to 1.0   </span>
conv_speed    <span class="hljs-comment"># the convolved (ie smoothed) speed</span></code></pre>

<ul>
<li><p>GPSBabel_open <br>
Uses GPSBabel to directly open convert foreign files to xml and open them in wxgpgpsport. <br>
GPSBabel must be installed on your system. <br>
You may need to edit the script to correct the location of gpsbabel program.  </p></li>
<li><p>GPSBabel_export <br>
Uses GPSBabel to directly export to foreign file format. Be aware thta not all formats are writable: <br>
GPSBabel must be installed on your system. <br>
If you convert to kml, you have the option to open the file in google earth immediately. <br>
You may need to edit the script to correct the location of gpsbabel (and google earth) programs.  </p></li>
</ul>



<h1 id="5-about-this-document"> 5. ABOUT THIS DOCUMENT</h1>

<p>This document is written in markdown and converted to html using stackedit (<a href="https://stackedit.io/editor#411">https://stackedit.io/editor#411</a>) <br>
 and escape html entities(<a href="http://www.htmlescape.net/htmlescape_tool.html">http://www.htmlescape.net/htmlescape_tool.html</a>).</p>



<h1 id="6-todo-list"> 6. TODO LIST</h1>



<h2 id="61-main-program">6.1 Main program</h2>

<ul>
<li>CSV/TSV import with time format string. <br>
import heartrate and other info from other captors. <br>
timeshift should be possible to precisely adjust datas.</li>
<li>TCX file import.  </li>
<li>List of plugins that should not be loaded (through *.ini file).  </li>
<li>On demand plugin loading and unloading.  </li>
<li>GPX1.1 import.  </li>
<li>Panel or entire frame screenshot (accessible by script) (app->plugin(&#x201c;name&#x201d;)->Screenshot(path)) <br>
(already implemented in wxGauge.py and wxSpeedmeter.py)</li>
</ul>



<h2 id="62-scripts">6.2 Scripts</h2>

<ul>
<li>Correction of elevation data using google elevation api. <br>
<a href="https://maps.googleapis.com/maps/api/elevation/json?locations=lat1,lon1|lat2,lon2|lat3|lon3">https://maps.googleapis.com/maps/api/elevation/json?locations=lat1,lon1|lat2,lon2|lat3|lon3</a>  </li>
<li>Automatic wind direction calculation - abandonned feature. An estimation can be done using <br>
<code>np.mod(gpx[('course',1,1)],180).mean()+90</code></li>
<li>Jibe/tack analysis, with Vmax, Vmin, jibe duration (time before we recover a given speed), jibe curve diameter (still buggy)</li>
<li>Apparent wind and VMG (still buggy)</li>
<li>*.srt (subtitle rip) export for use with sport camera. Synchronisation required</li>
<li>*.usf (universal subtitle format) export <em>with</em> pictures for use with sport camera.</li>
</ul>



<h2 id="63-plugins">6.3 Plugins</h2>

<p>The code to load working can also work in the frozen version (provided you copy the plugins folder to frozen app root folder). <br>
In order to get the plugins to work, the following extra modules are imported by pyinstaller.</p>



<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">import</span> wx.lib.agw.peakmeter <span class="hljs-keyword">as</span> pm
<span class="hljs-keyword">import</span> wx.lib.agw.speedmeter <span class="hljs-keyword">as</span> sm
<span class="hljs-keyword">import</span> wx.html2
<span class="hljs-keyword">from</span> wx.py <span class="hljs-keyword">import</span> shell
<span class="hljs-keyword">import</span>  wx.grid <span class="hljs-keyword">as</span>  wxgrid</code></pre>

<p>If you want to develop plugins that need to import extra python modules, you&#x2019;ll have to install a full python environment (in any case, installing a full environnement is better to develop plugins and scripts.</p>
